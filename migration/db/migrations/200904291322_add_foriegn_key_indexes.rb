class AddForiegnKeyIndexes < ActiveRecord::Migration
  @foreign_keys = [ { :addproducthistory =>  :assigneduser_id},
                     { :addproducthistory =>  :r_division},
                     { :addproducthistory =>  :r_jobsite},
                     { :addproducthistory =>  :r_owner},
                     { :addproducthistory =>  :r_productstatus},
                     { :addproducthistory =>  :r_producttype},
                     { :addproducthistory_infooption =>  :r_addproducthistory},
                     { :addproducthistory_infooption =>  :r_infooption},
                     { :addressinfo =>  :modifiedby},
                     { :autoattributecriteria =>  :modifiedby},
                     { :autoattributecriteria =>  :r_producttype},
                     { :autoattributecriteria =>  :r_tenant},
                     { :autoattributecriteria_inputinfofield =>  :r_autoattributecriteria},
                     { :autoattributecriteria_inputinfofield =>  :r_infofield},
                     { :autoattributecriteria_outputinfofield =>  :r_autoattributecriteria},
                     { :autoattributecriteria_outputinfofield =>  :r_infofield},
                     { :autoattributedefinition =>  :modifiedby},
                     { :autoattributedefinition =>  :r_autoattributecriteria},
                     { :autoattributedefinition =>  :r_tenant},
                     { :autoattributedefinition_inputinfooption =>  :r_autoattributedefinition},
                     { :autoattributedefinition_inputinfooption =>  :r_infooption},
                     { :autoattributedefinition_outputinfooption =>  :r_autoattributedefinition},
                     { :autoattributedefinition_outputinfooption =>  :r_infooption},
                     { :catalogs_inspectiontypes =>  :catalogs_id},
                     { :catalogs_producttypes =>  :catalogs_id},
                     { :catalogs_producttypes =>  :publishedproducttypes_id},
                     { :commenttemplate =>  :r_tenant},
                     { :configurations =>  :modifiedby},
                     { :configurations =>  :tenantid},
                     { :criteria =>  :modifiedby},
                     { :criteria =>  :r_tenant},
                     { :criteria =>  :states_id},
                     { :criteriaresults =>  :criteria_id}, 
                     { :criteriaresults =>  :inspection_id},
                     { :criteriaresults =>  :modifiedby},
                     { :criteriaresults =>  :r_tenant},
                     { :criteriaresults =>  :state_id},
                     { :criteriaresults_recommendations =>  :criteriaresults_id},
                     { :criteriaresults_recommendations =>  :recommendations_id},
                     { :criteriaresults_deficiencies =>  :criteriaresults_id},
                     { :criteriaresults_deficiencies =>  :deficiencies_id},
                     { :criteriasections =>  :modifiedby},
                     { :criteriasections =>  :r_tenant},
                     { :criteriasections_criteria =>  :criteria_id},
                     { :customers =>  :addressinfo_id},
                     { :customers =>  :modifiedby},
                     { :customers =>  :r_tenant},
                     { :divisions =>  :customer_id},
                     { :divisions =>  :modifiedby},
                     { :fileattachments =>  :modifiedby},
                     { :fileattachments =>  :r_tenant},
                     { :infofield =>  :r_productinfo},
                     { :infofield =>  :r_unitofmeasure},
                     { :infooption =>  :r_infofield},
                     { :inspectionbooks =>  :customer_id},
                     { :inspectionbooks =>  :modifiedby},
                     { :inspectionbooks =>  :r_tenant},
                     { :inspectiongroups =>  :modifiedby},
                     { :inspectiongroups =>  :r_tenant},
                     { :inspections =>  :modifiedby},
                     { :inspections =>  :product_id},
                     { :inspections =>  :r_tenant},
                     { :inspections =>  :type_id},
                     { :inspections_fileattachments =>  :attachments_id},
                     { :inspections_fileattachments =>  :inspections_id},
                     { :inspectionssub =>  :inspection_id},
                     { :inspectionschedules =>  :inspectiontype_id},
                     { :inspectionschedules =>  :modifiedby},
                     { :inspectionschedules =>  :product_id},
                     { :inspectionschedules =>  :r_tenant},
                     { :inspectionschedules =>  :customer_id},
                     { :inspectionschedules =>  :division_id},
                     { :inspectionschedules =>  :jobsite_id},
                     { :inspectionschedules =>  :project_id},
                     { :inspectionsmaster =>  :customer_id},
                     { :inspectionsmaster =>  :division_id},
                     { :inspectionsmaster =>  :group_id},
                     { :inspectionsmaster =>  :inspection_id},
                     { :inspectionsmaster =>  :inspector_uniqueid},
                     { :inspectionsmaster =>  :jobsite_id},
                     { :inspectionsmaster =>  :organization_id},
                     { :inspectiontypegroups =>  :observationprintout_id},
                     { :inspectiontypegroups =>  :modifiedby},
                     { :inspectiontypegroups =>  :printout_id},
                     { :inspectiontypegroups =>  :r_tenant},
                     { :inspectiontypes =>  :group_id},
                     { :inspectiontypes =>  :modifiedby},
                     { :inspectiontypes =>  :r_tenant},
                     { :inspectiontypes_criteriasections =>  :sections_id},
                     { :inspectiontypes_supportedprooftests =>  :inspectiontypes_id},
                     { :jobsites =>  :modifiedby},
                     { :jobsites =>  :r_customer},
                     { :jobsites =>  :r_division},
                     { :jobsites =>  :r_tenant},
                     { :lineitems =>  :modified},
                     { :lineitems =>  :order_id},
                     { :observations =>  :modifiedby},
                     { :observations =>  :r_tenant},
                     { :orders =>  :customer_id},
                     { :orders =>  :division_id},
                     { :orders =>  :modifiedby},
                     { :orders =>  :r_tenant},
                     { :organization =>  :r_addressinfo},
                     { :organization =>  :modifiedby},
                     { :organization =>  :parent_id},
                     { :organization =>  :r_tenant},
                     { :organization_extendedfeatures =>  :organization_id},
                     { :populatorlog =>  :r_tenant},
                     { :printouts =>  :modifiedby},
                     { :printouts =>  :tenant_id},
                     { :productcodemapping =>  :r_productinfo},
                     { :productcodemapping_infooption =>  :r_infooption},
                     { :productcodemapping_infooption =>  :r_productcodemapping},
                     { :products =>  :type_id},
                     { :products =>  :organization_id},
                     { :products =>  :owner_id},
                     { :products =>  :assigneduser_id},
                     { :products =>  :customerorder_id},
                     { :products =>  :shoporder_id},
                     { :products =>  :division_id},
                     { :products =>  :identifiedby_uniqueid},
                     { :products =>  :modifiedby},
                     { :products =>  :productstatus_uniqueid},
                     { :products =>  :jobsite_id},
                     { :productserial_infooption =>  :r_infooption},
                     { :productserial_infooption =>  :r_productserial},
                     { :productserialextension =>  :r_tenant},
                     { :productserialextensionvalue =>  :r_productserialextension},
                     { :productserialextensionvalue =>  :r_productserial},
                     { :productstatus =>  :r_tenant},
                     { :producttypes =>  :group_id},
                     { :producttypes =>  :modifiedby},
                     { :producttypes =>  :r_tenant},
                     { :producttypes_fileattachments =>  :attachments_id},
                     { :producttypes_fileattachments =>  :producttypes_id},
                     { :producttypes_producttypes =>  :subtypes_id},
                     { :producttypeschedules =>  :inspectiontype_id},
                     { :producttypeschedules =>  :modifiedby},
                     { :producttypeschedules =>  :customer_id},
                     { :producttypeschedules =>  :producttype_id},
                     { :producttypeschedules =>  :r_tenant},
                     { :projects =>  :customer_id},
                     { :projects =>  :division_id},
                     { :projects =>  :jobsite_id},
                     { :projects =>  :r_tenant},
                     { :projects_fileattachments =>  :notes_id},
                     { :projects_products =>  :products_id},
                     { :projects_products =>  :projects_id},
                     { :projects_users =>  :resources_uniqueid},
                     { :projects_users =>  :projects_id},
                     { :savedreports =>  :modifiedby},
                     { :savedreports =>  :r_tenant},
                     { :savedreports =>  :owner_uniqueid},
                     { :states =>  :r_tenant},
                     { :states =>  :modifiedby},
                     { :statesets =>  :modifiedby},
                     { :statesets =>  :r_tenant},
                     { :statesets_states =>  :states_id},
                     { :users =>  :r_organization},
                     { :users =>  :r_tenant}, 
                     { :users =>  :r_division},
                     { :users =>  :r_enduser},
                     { :userrequest =>  :modifiedby},
                     { :userrequest =>  :r_tenant},
                     { :userrequest =>  :r_useraccount},
                     { :unitofmeasures =>  :child_unitofmeasure_id},
                    ]
  
  def self.up
    @foreign_keys.each do |columns| 
      columns.each do |table, column|
        add_index(table,  column)
      end
    end
  end
  
  def self.down
    @foreign_keys.each do |columns|
      columns.each do |table, column|
        remove_index(table,  column)
      end
    end
  end
end
