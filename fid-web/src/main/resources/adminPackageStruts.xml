<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts><!-- Configuration for the default package. -->

	<!--
		constant name="struts.objectFactory" value="spring" /> <constant
		name="struts.devMode" value="true" /> <constant
		name="struts.url.includeParams" value="none" /
	-->

	<package name="admin" extends="struts-default" namespace="/admin">

		<interceptors>
			<interceptor name="signedIn"
				class="com.n4systems.fieldidadmin.utils.LoginInterceptor" />
			<interceptor-stack name="secureStack">
				<interceptor-ref name="signedIn" />
				<interceptor-ref name="paramsPrepareParamsStack" />
			</interceptor-stack>
		</interceptors>

		<default-interceptor-ref name="secureStack" />

		<global-results>
			<result name="signIn" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">signIn</param>
			</result>
		</global-results>

		<action name="signIn" method="doAdd"
			class="com.n4systems.fieldidadmin.actions.AuthenticationAction">
			<result name="success" type="freemarker">/admin/templates/html/login.ftl
			</result>
			<interceptor-ref name="defaultStack" />
		</action>

		<action name="signOut" method="doDelete"
			class="com.n4systems.fieldidadmin.actions.AuthenticationAction">
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">signIn</param>
			</result>
		</action>

		<action name="signIntoSystem" method="doCreate"
			class="com.n4systems.fieldidadmin.actions.AuthenticationAction">
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">organizations</param>
			</result>
			<interceptor-ref name="defaultStack" />
		</action>


		<action name="organizations" method="doList"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/html/organization/list.ftl
			</result>
		</action>

		<action name="organizationEdit" method="doEdit"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="input" type="freemarker">/admin/templates/html/organization/edit.ftl
			</result>
			<result name="success" type="freemarker">/admin/templates/html/organization/edit.ftl
			</result>
			<result name="error" type="freemarker">/admin/templates/html/organization/list.ftl
			</result>
		</action>

		<action name="organizationUpdate" method="doUpdate"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="input" type="freemarker">/admin/templates/html/organization/edit.ftl
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">organizations</param>
			</result>
			<result name="error" type="freemarker">/admin/templates/html/organization/list.ftl
			</result>
		</action>

		<action name="organization" method="doShow"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/html/organization/show.ftl
			</result>
			<result name="error" type="freemarker">/admin/templates/html/organization/show.ftl
			</result>
			<result name="input" type="freemarker">/admin/templates/html/organization/show.ftl
			</result>
		</action>

        <action name="rebuildIndex" method="doRebuildIndex"
                class="com.n4systems.fieldidadmin.actions.OrganizationAction">
            <result name="success" type="redirectAction">
                <param name="actionName">organizationEdit</param>
                <param name="namespace">/admin</param>
                <param name="id">${tenant.id}</param>
            </result>
        </action>

        <action name="rebuildCriteriaTrendsIndex" method="doRebuildCriteriaTrendsIndex"
                class="com.n4systems.fieldidadmin.actions.OrganizationAction">
            <result name="success" type="redirectAction">
                <param name="actionName">organizationEdit</param>
                <param name="namespace">/admin</param>
                <param name="id">${tenant.id}</param>
            </result>
        </action>

        <action name="rebuildEventIndex" method="doRebuildEventIndex"
                class="com.n4systems.fieldidadmin.actions.OrganizationAction">
            <result name="success" type="redirectAction">
                <param name="actionName">organizationEdit</param>
                <param name="namespace">/admin</param>
                <param name="id">${tenant.id}</param>
            </result>
        </action>

		<action name="orderMappingList" method="doList"
			class="com.n4systems.fieldidadmin.actions.OrderMappingAction">
			<result name="success" type="freemarker">/admin/templates/html/ordermapping/list.ftl
			</result>
		</action>

		<action name="uploadOrderMappingXml" method="doXmlUpload"
			class="com.n4systems.fieldidadmin.actions.OrderMappingAction">
			<interceptor-ref name="fileUpload" />
			<interceptor-ref name="basicStack" />
			<result name="input" type="freemarker">/admin/templates/html/ordermapping/list.ftl
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">orderMappingList</param>
			</result>
			<result name="error" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">orderMappingList</param>
			</result>
		</action>

		<action name="orderMappingCrud" method="doFormInput"
			class="com.n4systems.fieldidadmin.actions.OrderMappingAction">
			<result name="input" type="freemarker">/admin/templates/html/ordermapping/orderMappingForm.ftl
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">orderMappingList</param>
			</result>
		</action>

        <action name="orderMappingSave" method="doSave"
                class="com.n4systems.fieldidadmin.actions.OrderMappingAction">
            <result name="input" type="freemarker">/admin/templates/html/ordermapping/orderMappingForm.ftl
            </result>
            <result name="success" type="redirectAction">
                <param name="namespace">/admin</param>
                <param name="actionName">orderMappingList</param>
            </result>
        </action>

		<action name="orderMappingDelete" method="doDelete"
			class="com.n4systems.fieldidadmin.actions.OrderMappingAction">
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">orderMappingList</param>
			</result>
		</action>

		<action name="mailTest" method="doInput" class="com.n4systems.fieldidadmin.actions.MailAction">
			<result name="success" type="freemarker">/admin/templates/html/mail/mail.ftl</result>
		</action>

        <action name="sendMailTest" method="doSend" class="com.n4systems.fieldidadmin.actions.MailAction">
            <result name="input" type="freemarker">/admin/templates/html/mail/mail.ftl</result>
            <result name="success" type="freemarker">/admin/templates/html/mail/mail.ftl</result>
            <result name="error" type="freemarker">/admin/templates/html/mail/mail.ftl</result>
        </action>

        <action name="configCrud" method="doLoad"
			class="com.n4systems.fieldidadmin.actions.ConfigurationAction">
			<result name="success" type="freemarker">/admin/templates/html/config/config.ftl
			</result>
			<result name="error" type="freemarker">/admin/templates/html/config/config.ftl
			</result>
		</action>

        <action name="configCrudSave" method="doSave"
                class="com.n4systems.fieldidadmin.actions.ConfigurationAction">
            <result name="success" type="freemarker">/admin/templates/html/config/config.ftl
            </result>
            <result name="error" type="freemarker">/admin/templates/html/config/config.ftl
            </result>
        </action>

		<action name="certSelection" class="com.n4systems.fieldidadmin.actions.SimpleAction">
			<result name="success" type="freemarker">/admin/templates/html/certSelection/show.ftl
			</result>
		</action>

		<action name="defaultPrintOuts" method="doList"
			class="com.n4systems.fieldidadmin.actions.DefaultPrintOutCrud">
			<result name="success" type="freemarker">/admin/templates/html/defaultPrintOuts/list.ftl
			</result>
			<result name="error" type="freemarker">/admin/templates/html/defaultPrintOuts/list.ftl
			</result>
		</action>

		<action name="defaultPrintOutAdd" method="doAdd"
			class="com.n4systems.fieldidadmin.actions.DefaultPrintOutCrud">
			<result name="success" type="freemarker">/admin/templates/html/defaultPrintOuts/add.ftl
			</result>
		</action>

		<action name="defaultPrintOutEdit" method="doEdit"
			class="com.n4systems.fieldidadmin.actions.DefaultPrintOutCrud">
			<result name="success" type="freemarker">/admin/templates/html/defaultPrintOuts/edit.ftl
			</result>
		</action>

		<action name="defaultPrintOutCreate" method="doCreate"
			class="com.n4systems.fieldidadmin.actions.DefaultPrintOutCrud">
			<result name="error" type="freemarker">/admin/templates/html/defaultPrintOuts/add.ftl
			</result>
			<result name="input" type="freemarker">/admin/templates/html/defaultPrintOuts/add.ftl
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">defaultPrintOuts</param>
			</result>
		</action>

		<action name="defaultPrintOutUpdate" method="doUpdate"
			class="com.n4systems.fieldidadmin.actions.DefaultPrintOutCrud">
			<result name="error" type="freemarker">/admin/templates/html/defaultPrintOuts/edit.ftl
			</result>
			<result name="input" type="freemarker">/admin/templates/html/defaultPrintOuts/edit.ftl
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">defaultPrintOuts</param>
			</result>
		</action>
		<action name="defaultPrintOutDelete" method="doDelete"
			class="com.n4systems.fieldidadmin.actions.DefaultPrintOutCrud">
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">defaultPrintOuts</param>
			</result>
			<result name="error" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">defaultPrintOuts</param>
			</result>
		</action>

		<action name="customPrintOuts" method="doList"
			class="com.n4systems.fieldidadmin.actions.CustomPrintOutCrud">
			<result name="success" type="freemarker">/admin/templates/html/customPrintOuts/list.ftl
			</result>
			<result name="error" type="freemarker">/admin/templates/html/customPrintOuts/list.ftl
			</result>
		</action>

		<action name="customPrintOutAdd" method="doAdd"
			class="com.n4systems.fieldidadmin.actions.CustomPrintOutCrud">
			<result name="success" type="freemarker">/admin/templates/html/customPrintOuts/add.ftl
			</result>
		</action>

		<action name="customPrintOutEdit" method="doEdit"
			class="com.n4systems.fieldidadmin.actions.CustomPrintOutCrud">
			<result name="success" type="freemarker">/admin/templates/html/customPrintOuts/edit.ftl
			</result>
		</action>

		<action name="customPrintOutCreate" method="doCreate"
			class="com.n4systems.fieldidadmin.actions.CustomPrintOutCrud">
			<result name="error" type="freemarker">/admin/templates/html/customPrintOuts/add.ftl
			</result>
			<result name="input" type="freemarker">/admin/templates/html/customPrintOuts/add.ftl
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">customPrintOuts</param>
			</result>
		</action>

		<action name="customPrintOutUpdate" method="doUpdate"
			class="com.n4systems.fieldidadmin.actions.CustomPrintOutCrud">
			<result name="error" type="freemarker">/admin/templates/html/customPrintOuts/edit.ftl
			</result>
			<result name="input" type="freemarker">/admin/templates/html/customPrintOuts/edit.ftl
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">customPrintOuts</param>
			</result>
		</action>
		<action name="customPrintOutDelete" method="doDelete"
			class="com.n4systems.fieldidadmin.actions.CustomPrintOutCrud">
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">customPrintOuts</param>
			</result>
			<result name="error" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">customPrintOuts</param>
			</result>
		</action>

		<action name="taskCrud" method="doLoad"
			class="com.n4systems.fieldidadmin.actions.TaskAction">
			<result name="success" type="freemarker">/admin/templates/html/tasks/tasks.ftl
			</result>
			<result name="error" type="freemarker">/admin/templates/html/tasks/tasks.ftl
			</result>
		</action>

		<action name="enableDisableTask" method="doEnableDisableTask"
			class="com.n4systems.fieldidadmin.actions.TaskAction">
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">taskCrud</param>
			</result>
			<result name="error" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">taskCrud</param>
			</result>
		</action>

        <action name="runTask" method="doRunTask"
                class="com.n4systems.fieldidadmin.actions.TaskAction">
            <result name="success" type="redirectAction">
                <param name="namespace">/admin</param>
                <param name="actionName">taskCrud</param>
            </result>
            <result name="error" type="redirectAction">
                <param name="namespace">/admin</param>
                <param name="actionName">taskCrud</param>
            </result>
        </action>

		<action name="enableDisableScheduler" method="doEnableDisableScheduler"
			class="com.n4systems.fieldidadmin.actions.TaskAction">
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">taskCrud</param>
			</result>
			<result name="error" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">taskCrud</param>
			</result>
		</action>

		<action name="reloadScheduler" method="doReloadScheduler"
			class="com.n4systems.fieldidadmin.actions.TaskAction">
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">taskCrud</param>
			</result>
			<result name="error" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">taskCrud</param>
			</result>
		</action>

		<action name="changeAdminPass" method="doLoad" class="com.n4systems.fieldidadmin.actions.ChangeSystemPasswordAction">
			<result name="success" type="freemarker">
                /admin/templates/html/changeadminpass/form.ftl
			</result>
			<result name="error" type="freemarker">
                /admin/templates/html/changeadminpass/form.ftl
			</result>
		</action>

        <action name="saveAdminPass" method="doSave" class="com.n4systems.fieldidadmin.actions.ChangeSystemPasswordAction">
            <result name="success" type="freemarker">
                /admin/templates/html/changeadminpass/form.ftl
            </result>
            <result name="error" type="freemarker">
                /admin/templates/html/changeadminpass/form.ftl
            </result>
        </action>

		<action name="eulas" method="doList"
			class="com.n4systems.fieldidadmin.actions.EulaCrud">
			<result name="success" type="freemarker">/admin/templates/html/eula/list.ftl
			</result>
			<result name="error" type="freemarker">/admin/templates/html/eula/list.ftl
			</result>
			<result name="input" type="freemarker">/admin/templates/html/eula/list.ftl
			</result>
		</action>


		<action name="eulaAdd" method="doAdd"
			class="com.n4systems.fieldidadmin.actions.EulaCrud">
			<result name="success" type="freemarker">/admin/templates/html/eula/add.ftl
			</result>
			<result name="input" type="freemarker">/admin/templates/html/eula/add.ftl
			</result>
		</action>

		<action name="eulaCreate" method="doCreate"
			class="com.n4systems.fieldidadmin.actions.EulaCrud">
			<result name="input" type="freemarker">/admin/templates/html/eula/add.ftl
			</result>
			<result name="error" type="freemarker">/admin/templates/html/eula/add.ftl
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">eulas</param>
			</result>
		</action>

		<action name="eulaEdit" method="doEdit"
			class="com.n4systems.fieldidadmin.actions.EulaCrud">
			<result name="success" type="freemarker">/admin/templates/html/eula/edit.ftl
			</result>
			<result name="input" type="freemarker">/admin/templates/html/eula/edit.ftl
			</result>
		</action>

		<action name="eulaUpdate" method="doUpdate"
			class="com.n4systems.fieldidadmin.actions.EulaCrud">
			<result name="input" type="freemarker">/admin/templates/html/eula/edit.ftl
			</result>
			<result name="error" type="freemarker">/admin/templates/html/eula/edit.ftl
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">eulas</param>
			</result>
		</action>


		<action name="eulaDelete" method="doDelete"
			class="com.n4systems.fieldidadmin.actions.EulaCrud">
			<result name="input" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">eulas</param>
			</result>
			<result name="error" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">eulas</param>
			</result>
			<result name="success" type="redirectAction">
				<param name="namespace">/admin</param>
				<param name="actionName">eulas</param>
			</result>
		</action>
	</package>


	<package name="adminAjaxAction" extends="admin" namespace="/adminAjax">
		<action name="getConfigValue" method="doGetConfiguration"
			class="com.n4systems.fieldidadmin.actions.ConfigurationAction">
			<result name="success" type="freemarker">/admin/templates/html/config/ajaxConfigValue.ftl</result>
		</action>

		<action name="editNote" method="doEditNote"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/editNote.ftl</result>
		</action>

		<action name="updateOrg" method="doUpdateOrg"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/displayNote.ftl</result>
		</action>

		<action name="updateTenantStatus" method="doUpdateTenantStatus"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/updateStatus.ftl</result>
		</action>

		<action name="editTenantName" method="doEditTenantName"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/editName.ftl</result>
		</action>

		<action name="cancelTenantName" method="doCancelTenantName"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/displayName.ftl</result>
		</action>

		<action name="editSignUp" method="doEditSignUp"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/editSignUp.ftl</result>
		</action>

		<action name="cancelSignUp" method="doCancelSignUp"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/displaySignUp.ftl</result>
		</action>

		<action name="updateSignUp" method="doUpdateSignUp"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/displaySignUp.ftl</result>
		</action>

		<action name="updateTenantName" method="doUpdateTenantName"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
            <result name="success" type="freemarker">/admin/templates/ajax/organization/displayName.ftl</result>
            <result name="input" type="freemarker">/admin/templates/ajax/organization/editName.ftl</result>
            <result name="error" type="freemarker">/admin/templates/ajax/organization/editName.ftl</result>
		</action>

		<action name="cancelNote" method="doCancelNote"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/displayNote.ftl</result>
		</action>

		<action name="editPlan" method="doEditPlan"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/editPlan.ftl</result>
		</action>

		<action name="savePlan" method="doSavePlan"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/displayPlan.ftl</result>
		</action>

		<action name="cancelPlan" method="doCancelPlan"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/displayPlan.ftl</result>
		</action>

		<action name="updateExtendedFeature" method="doUpdateExtendedFeature"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/updateExtendedFeature.ftl</result>
		</action>

		<action name="updatePlansAndPricing" method="doUpdatePlansAndPricing"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/updatePlansAndPricing.ftl</result>
		</action>

		<action name="updateSecondaryOrgs" method="doUpdateSecondaryOrgs"
			class="com.n4systems.fieldidadmin.actions.OrganizationAction">
			<result name="success" type="freemarker">/admin/templates/ajax/organization/updateSecondaryOrgsButton.ftl</result>
		</action>

        <action name="assets30Day" method="doAjax" class="com.n4systems.fieldidadmin.actions.OrganizationAction">
            <result name="success" type="freemarker">/admin/templates/ajax/organization/assets30Day.ftl</result>
        </action>

        <action name="events30Day" method="doAjax" class="com.n4systems.fieldidadmin.actions.OrganizationAction">
            <result name="success" type="freemarker">/admin/templates/ajax/organization/events30Day.ftl</result>
        </action>

        <action name="toggleInspectionsEnabled" method="doToggleInspectionsEnabled"
                class="com.n4systems.fieldidadmin.actions.OrganizationAction">
            <result name="success" type="freemarker">/admin/templates/ajax/organization/updateModules.ftl</result>
        </action>

        <action name="toggleLotoEnabled" method="doToggleLotoEnabled"
                class="com.n4systems.fieldidadmin.actions.OrganizationAction">
            <result name="success" type="freemarker">/admin/templates/ajax/organization/updateModules.ftl</result>
        </action>


    </package>
</struts>