<html xmlns:wicket="http://wicket.apache.org/dtds.data/wicket-xhtml1.4-strict.dtd">
<wicket:panel>

<!--${action.setPageType('auto_attribute', 'definitions')!}
<head>
    <@n4.includeScript src="unitOfMeasure.js"/>
    <@n4.includeScript src="combobox.js"/>

    <script type="text/javascript">
        unitOfMeasureUrl = '<@s.url action="unitOfMeasure" namespace="/ajax" />';
    </script>
    <#include "/templates/html/common/_datetimepicker.ftl"/>
</head>
<#include "_secondaryNav.ftl"/>
<@s.form action="autoAttributeDefinitionSave" cssClass="fullForm " theme="fieldid" >


<@s.hidden name="uniqueID" />
<@s.hidden name="criteriaId"/>

<div id="inputlist"  class="fluidSets" style="width:750px;   padding:10px;  border:1px solid #cfdddd;">
    <h3><@s.text name="label.inputfields" /></h3>
    <#assign noblanks=true />
    <#assign noComboBox=true/>
    <#assign fieldPrefix='input' />
    <#assign prefix='input'/>
    <#assign useAutoAttributes=false/>
    <#include "/templates/html/assetCrud/_attributes.ftl" />

</div>
<div style="margin:20px;" >
    <h3><@s.text name="label.mapto" /></h3>
</div>
<div id="outputlist"  class="fluidSets" style="width:750px;   padding:10px;  border:1px solid #cfdddd;">
    <h3><@s.text name="label.outputfields" /></h3>
    <#assign noblanks=false />
    <#assign noComboBox=false />
    <#assign fieldPrefix= 'output' />
    <#assign prefix= 'output' />
    <#assign useAutoAttributes=false/>
    <#include "/templates/html/assetCrud/_attributes.ftl" />
</div>

<div class="formAction">

    <@s.submit name="save" key="hbutton.save"/>
    <#if !autoAttributeDefinition.id?exists  >
        <@s.submit name="saveandadd" key="hbutton.saveandadd" />
    </#if>
    <@s.text name="label.or"/>
    <a href="<@s.url action="autoAttributeDefinitionList" criteriaId="${criteriaId}"/>" ><@s.text name="label.cancel" /></a>
</div>
</@s.form >-->

  <!--  <#&#45;&#45; /templates/ahtml/registerAsset also contains a version of this template &ndash;&gt;
        <#if !fieldPrefix?exists>
            <#assign fieldPrefix= 'asset' />
        </#if>
        <#if !useAutoAttributes?exists>
            <#assign useAutoAttributes=true />
        </#if>
        <#if autoAttributeCriteria?exists >
            <#assign autoAttributeInputFields=autoAttributeCriteria.inputs />
        </#if>
        <#if !prefix?exists>
            <#assign prefix= 'asset' />
        </#if>
        <#if !requires?exists>
            <#assign requires=true>
        </#if>
        <@s.if test="${fieldPrefix}InfoFields != null" >
        <#if useAutoAttributes?exists && useAutoAttributes == true >
            <#assign changeFunction="updateAttributes(this);" />

            <#else>
                <#assign changeFunction="" />
        </#if>

        <@s.iterator value="${fieldPrefix}InfoFields" id="infoField" status="stat" >
        <#if requires && infoField.required  >
            <#assign requiredClass='requiredField'/>
            <#else>
                <#assign requiredClass=''/>
        </#if>

        <@s.if test="${prefix}InfoOptions[${stat.index}].name == null" >
        <#assign infoOptionIsNull=true>
        </@s.if>
        <@s.else>
        <#assign infoOptionIsNull=false>
        </@s.else>

        <#if !infoField.retired || infoOptionIsNull == false>
            <div class="infoSet <#if infoField.fieldType == 'datefield'>increasedWidthFieldHolder</#if>" infoFieldName="${infoField.name?j_string}" >
                <@s.hidden name="${prefix}InfoOptions[${stat.index}].infoFieldId"  value="${infoField.uniqueID}"/>

                <#if infoField.retired >
                    <label class="label">${infoField.name?html} (<@s.text name="label.retired"/>)</label>
                    <span id="${infoField.uniqueID}" class="attribute fieldHolder" >
						<@s.label id="${infoField.uniqueID}" cssClass="attribute ${requiredClass}" name="${prefix}InfoOptions[${stat.index}].name" />
						<@s.hidden name="${prefix}InfoOptions[${stat.index}].name" />
						<@s.hidden name="${prefix}InfoOptions[${stat.index}].uniqueIDString" />
					</span>
                    <#else>
                        <label class="label"> <#if  requires == true && infoField.required ><#include "../common/_requiredMarker.ftl"/></#if> ${infoField.name?html} </label>
                        <#if infoField.fieldType == "selectbox" || infoField.fieldType == "combobox" >
                            <@s.select cssClass="attribute ${requiredClass}"  list="%{ getComboBoxInfoOptions( ${fieldPrefix}InfoFields[${stat.index}], ${prefix}InfoOptions  ) }" listKey="id" listValue="name" name="${prefix}InfoOptions[${stat.index}].uniqueIDString" id="${infoField.uniqueID}" theme="fieldid" >
                            <#if autoAttributeInputFields?exists && autoAttributeInputFields.contains( infoField ) >
                                <@s.param name="onchange">${changeFunction}</@s.param>
                        </#if>
                        <#if !(noblanks?exists && noblanks) >
                            <@s.param name="headerKey">0</@s.param>
                        <@s.param name="headerValue"></@s.param>
                </#if>

            </@s.select>


            <#if infoField.fieldType == "combobox" && ( !noComboBox?exists || noComboBox == false ) >

                <script type="text/javascript">
                    new toCombo('${prefix}InfoOptions[${stat.index}].uniqueIDString');
                </script>
            </#if>

        </#if>
        <#if infoField.fieldType == "textfield" >
            <#if !infoField.usingUnitOfMeasure >
                <@s.textfield id="${infoField.uniqueID}" cssClass="attribute  ${requiredClass}"  name="${prefix}InfoOptions[${stat.index}].name"   theme="fieldid"/>
                <#else>
                    <div class="fieldHolder">
						  		<span class="unitOfMeasure">
						  			<@s.textfield id="${infoField.uniqueID}" name="${prefix}InfoOptions[${stat.index}].name" theme="fieldidSimple" cssClass="dataEntry attribute unitOfMeasure  ${requiredClass}" readonly="true" />
						  		</span>
                        <span class="action">
							  		<a href="javascript: void(0);" id="unitOfMeasureSelector_${infoField.uniqueID}" class="editLink" onclick="$('unitSelectorDiv_${infoField.uniqueID}').toggle('normal'); if( $('unitSelectorDiv_${infoField.uniqueID}').visible() ) { loadUnitOfMeasure('${infoField.uniqueID}', ${ (infoField.unitOfMeasure.id)!"null" } ); }">
							  			<img style="border: none;" src="images/unit_of_measure.png" />
                            </a>
								</span>
                        <div id="unitSelectorDiv_${infoField.uniqueID}" class="unitMeasureDiv" style="display:none;" >
                            <table width="100%">
                                <tr><td align="center">
                                    <img src="images/loading_animation_liferay.gif" />
                                </td></tr>
                            </table>
                        </div>
                    </div>
            </#if>
        </#if>

        <#if infoField.fieldType == "datefield" >
            <#if infoField.includeTime>
                <@s.textfield theme="fieldid" id="${infoField.uniqueID}" name="${prefix}InfoOptions[${stat.index}].name" cssClass="datetimepicker"/>
                <#else>
                    <@s.textfield theme="fieldid" id="${infoField.uniqueID}" name="${prefix}InfoOptions[${stat.index}].name" cssClass="datepicker"/>
            </#if>
            <script type="text/javascript">
                initDatePicker();
            </script>
        </#if>
        </#if>
        </div>
        </#if>
    </@s.iterator>
</@s.if>-->

    <form wicket:id="addDefinitionForm">
    <div id="inputlist"  class="fluidSets" style="width:750px;   padding:10px;  border:1px solid #cfdddd;">
        <h3><wicket:message key="label.inputfields"/></h3>
        <div wicket:id="inputFieldsList" class="notranslate">
            <wicket:container wicket:id="inputAttribute"></wicket:container>
            <!--<div class="infoSet">
                <label class="label">
                    <span style="padding-right: 2px;" wicket:id="required"></span>
                    <span wicket:id="inputFieldName"></span>
                </label>

              &lt;!&ndash;  <label class="label">${infoField.name?html} (<@s.text name="label.retired"/>)</label>
                <span id="${infoField.uniqueID}" class="attribute fieldHolder" >
						<@s.label id="${infoField.uniqueID}" cssClass="attribute ${requiredClass}" name="${prefix}InfoOptions[${stat.index}].name" />&ndash;&gt;

               &lt;!&ndash; <@s.select cssClass="attribute ${requiredClass}"&ndash;&gt;
                <span class="fieldHolder">
                    <select class="attribute" style="width: 250px;" wicket:id="inputFieldValue"></select>
                </span>
            </div>-->
        </div>
    </div>

    <div style="margin:20px;" >
        <h3><wicket:message key="label.mapto" /></h3>
    </div>

    <div id="outputlist"  class="fluidSets" style="width:750px;   padding:10px;  border:1px solid #cfdddd;">
        <h3><wicket:message key="label.outputfields" /></h3>
        <div wicket:id="outputFieldsList" class="notranslate">
            <wicket:container wicket:id="outputAttribute"></wicket:container>
        </div>
    </div>

    <div class="formAction">

        <input type="submit" wicket:id="save" wicket:message="value:hbutton.save"/>
    <!--    <#if !autoAttributeDefinition.id?exists  >-->
            <input type="submit" wicket:id="saveAndAdd" wicket:message="value:hbutton.saveandadd" />
<!--        </#if>-->
        <wicket:message key="label.or"/>
        <a href="javascript:void(0);" wicket:id="cancel"><wicket:message key="label.cancel" /></a>
    </div>

    </form>
</wicket:panel>
</html>
