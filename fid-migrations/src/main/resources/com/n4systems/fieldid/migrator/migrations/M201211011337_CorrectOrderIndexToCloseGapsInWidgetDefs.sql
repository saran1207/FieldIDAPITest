update dashboard_columns_widget_definitions defs join (select dashboard_column_id,max(orderIdx) as max_index, round((count(*)*(count(*)+1))/2) - sum(orderIdx) as missing_index from dashboard_columns_widget_definitions group by dashboard_column_id having max(orderIdx) + 1 <> count(*)) missings on defs.dashboard_column_id = missings.dashboard_column_id set defs.orderIdx = defs.orderIdx - 1 where defs.orderIdx > missing_index;

